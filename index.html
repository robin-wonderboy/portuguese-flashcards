<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>üáµüáπ Portuguese Flashcards</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="PT Vocab">
    <meta name="theme-color" content="#1a1a2e">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            overscroll-behavior: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            padding-top: max(20px, env(safe-area-inset-top));
            color: white;
        }
        
        h1 {
            margin-bottom: 10px;
            font-size: 1.8rem;
        }
        
        .subtitle {
            color: #888;
            margin-bottom: 20px;
            font-size: 0.9rem;
        }
        
        .global-stats {
            background: linear-gradient(145deg, #2d2d44 0%, #1f1f2e 100%);
            border-radius: 15px;
            padding: 15px 25px;
            margin-bottom: 20px;
            display: flex;
            gap: 25px;
            border: 1px solid #3d3d5c;
        }
        
        .global-stat {
            text-align: center;
        }
        
        .global-stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #4ade80;
        }
        
        .global-stat-label {
            font-size: 0.7rem;
            color: #888;
            text-transform: uppercase;
        }
        
        .stats {
            display: flex;
            gap: 30px;
            margin-bottom: 20px;
            justify-content: center;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #4ade80;
        }
        
        .stat-label {
            font-size: 0.75rem;
            color: #888;
            text-transform: uppercase;
        }
        
        .card-container {
            perspective: 1000px;
            width: 100%;
            max-width: 440px;
            height: 280px;
            margin-bottom: 25px;
        }
        
        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s ease;
            cursor: pointer;
        }
        
        .card.flipped {
            transform: rotateY(180deg);
        }
        
        .card-face.fade-out {
            animation: fadeOut 0.2s ease forwards;
        }
        
        .card-face.fade-in {
            animation: fadeIn 0.2s ease forwards;
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 25px;
            text-align: center;
        }
        
        .card-front {
            background: linear-gradient(145deg, #2d2d44 0%, #1f1f2e 100%);
            border: 2px solid #3d3d5c;
        }
        
        .card-back {
            background: linear-gradient(145deg, #1e4d2b 0%, #0d2818 100%);
            border: 2px solid #2d7a3d;
            transform: rotateY(180deg);
        }
        
        .card-lang {
            font-size: 0.85rem;
            color: #888;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .card-word {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 12px;
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 100%;
            line-height: 1.2;
        }
        
        .card-example {
            font-size: 0.9rem;
            color: #aaa;
            font-style: italic;
            line-height: 1.4;
        }
        
        .card-hint {
            font-size: 0.75rem;
            color: #666;
            margin-top: 15px;
        }
        
        .card-mastery {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 0.75rem;
            padding: 4px 10px;
            border-radius: 20px;
            background: rgba(0,0,0,0.3);
        }
        
        .mastery-new { color: #888; }
        .mastery-learning { color: #fbbf24; }
        .mastery-familiar { color: #60a5fa; }
        .mastery-mastered { color: #4ade80; }
        
        .controls {
            display: flex;
            gap: 12px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }
        
        button:hover {
            transform: translateY(-2px);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .btn-know {
            background: #4ade80;
            color: #000;
        }
        
        .btn-know:hover {
            background: #22c55e;
        }
        
        .btn-dont-know {
            background: #f87171;
            color: #000;
        }
        
        .btn-dont-know:hover {
            background: #ef4444;
        }
        
        .btn-secondary {
            background: #3d3d5c;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #4d4d6c;
        }
        
        .btn-small {
            padding: 8px 16px;
            font-size: 0.85rem;
        }
        
        .progress-bar {
            width: 100%;
            max-width: 440px;
            height: 6px;
            background: #2d2d44;
            border-radius: 3px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ade80, #22d3ee);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        .options {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .option {
            display: flex;
            align-items: center;
            gap: 6px;
            color: #888;
            font-size: 0.85rem;
        }
        
        .option input {
            accent-color: #4ade80;
        }
        
        .date-selector {
            margin-bottom: 15px;
            text-align: center;
        }
        
        .date-selector select {
            padding: 10px 15px;
            border-radius: 8px;
            border: 2px solid #3d3d5c;
            background: #1f1f2e;
            color: white;
            font-size: 0.95rem;
            cursor: pointer;
        }
        
        .complete-screen {
            text-align: center;
            padding: 30px;
        }
        
        .complete-screen h2 {
            font-size: 2rem;
            margin-bottom: 15px;
        }
        
        .complete-score {
            font-size: 3.5rem;
            font-weight: bold;
            color: #4ade80;
            margin-bottom: 10px;
        }
        
        .complete-message {
            color: #888;
            margin-bottom: 25px;
        }
        
        .review-list {
            text-align: left;
            background: #2d2d44;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            max-width: 440px;
        }
        
        .review-list h3 {
            margin-bottom: 15px;
            color: #f87171;
        }
        
        .review-item {
            padding: 10px 0;
            border-bottom: 1px solid #3d3d5c;
        }
        
        .review-item:last-child {
            border-bottom: none;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 10px 20px;
            border-radius: 8px;
            background: #2d2d44;
            color: #888;
            cursor: pointer;
            border: none;
            font-size: 0.9rem;
        }
        
        .tab.active {
            background: #4ade80;
            color: #000;
        }
        
        .word-list {
            max-width: 400px;
            width: 100%;
            max-height: 60vh;
            overflow-y: auto;
        }
        
        .word-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: #2d2d44;
            border-radius: 10px;
            margin-bottom: 8px;
        }
        
        .word-item-text {
            flex: 1;
        }
        
        .word-item-pt {
            font-weight: bold;
        }
        
        .word-item-de, .word-item-en {
            font-size: 0.8rem;
            color: #888;
        }
        
        .word-item-mastery {
            font-size: 0.75rem;
            padding: 4px 10px;
            border-radius: 15px;
            background: rgba(0,0,0,0.3);
        }
        
        .hidden {
            display: none !important;
        }
        
        .reset-btn {
            margin-top: 30px;
            background: transparent;
            border: 1px solid #666;
            color: #666;
            font-size: 0.8rem;
            padding: 8px 15px;
        }
        
        .reset-btn:hover {
            border-color: #f87171;
            color: #f87171;
        }
        
        .lang-selectors {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
            justify-content: center;
        }
        
        .lang-selector {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }
        
        .lang-selector label {
            font-size: 0.7rem;
            color: #888;
            text-transform: uppercase;
        }
        
        .lang-selector select {
            padding: 8px 12px;
            border-radius: 8px;
            border: 2px solid #3d3d5c;
            background: #1f1f2e;
            color: white;
            font-size: 0.95rem;
            cursor: pointer;
        }
        
        .lang-selector select:focus {
            border-color: #4ade80;
            outline: none;
        }
        
        .lang-arrow {
            color: #4ade80;
            font-size: 1.2rem;
            font-weight: bold;
            margin-top: 18px;
        }
        
        .backup-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .backup-btn {
            background: transparent;
            border: 1px solid #4ade80;
            color: #4ade80;
            font-size: 0.8rem;
            padding: 8px 15px;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.2s;
        }
        
        .backup-btn:hover {
            background: #4ade80;
            color: #000;
        }
        
        .import-input {
            display: none;
        }
    </style>
</head>
<body>
    <div class="global-stats">
        <div class="global-stat">
            <div class="global-stat-value" id="totalMastered">0</div>
            <div class="global-stat-label">Mastered</div>
        </div>
        <div class="global-stat">
            <div class="global-stat-value" id="totalWords">0</div>
            <div class="global-stat-label">Total Words</div>
        </div>
        <div class="global-stat">
            <div class="global-stat-value" id="dayStreak">0</div>
            <div class="global-stat-label">Day Streak</div>
        </div>
    </div>
    
    <div class="tabs">
        <button class="tab active" onclick="showTab('practice')">üìö Practice</button>
        <button class="tab" onclick="showTab('words')">üìñ All Words</button>
    </div>
    
    <div id="practiceTab">
        <div class="date-selector">
            <select id="dateSelect" onchange="loadDate()">
                <option value="daily">üìÖ Daily 20</option>
                <option value="weak">üéØ Weak Words First</option>
                <option value="all">üìö All Words</option>
                <option value="manual">üìù Manual Vocab</option>
                <!-- Date options populated dynamically -->
            </select>
        </div>
        
        <div id="cardScreen">
            <div class="stats">
                <div class="stat">
                    <div class="stat-value" id="correctCount">0</div>
                    <div class="stat-label">Correct</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="remainingCount">0</div>
                    <div class="stat-label">Remaining</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="streakCount">0</div>
                    <div class="stat-label">Streak üî•</div>
                </div>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            
            <div class="options">
                <label class="option">
                    <input type="checkbox" id="shuffleMode" checked>
                    üîÄ Shuffle
                </label>
            </div>
            
            <div class="lang-selectors">
                <div class="lang-selector">
                    <label>Front:</label>
                    <select id="frontLangSelect" onchange="updateLangSelectors()">
                        <option value="pt">üáµüáπ PT</option>
                        <option value="de">üá©üá™ DE</option>
                        <option value="en">üá¨üáß EN</option>
                    </select>
                </div>
                <span class="lang-arrow">‚Üí</span>
                <div class="lang-selector">
                    <label>Back:</label>
                    <select id="backLangSelect" onchange="updateLangSelectors()">
                        <option value="pt">üáµüáπ PT</option>
                        <option value="de" selected>üá©üá™ DE</option>
                        <option value="en">üá¨üáß EN</option>
                    </select>
                </div>
            </div>
            
            <div class="card-container">
                <div class="card" id="flashcard" onclick="flipCard()">
                    <div class="card-face card-front">
                        <span class="card-mastery mastery-new" id="frontMastery">New</span>
                        <div class="card-lang" id="frontLang">Portugu√™s</div>
                        <div class="card-word" id="frontWord">Loading...</div>
                        <div class="card-hint">üëÜ Tap card to reveal answer</div>
                    </div>
                    <div class="card-face card-back">
                        <div class="card-lang" id="backLang">Deutsch</div>
                        <div class="card-word" id="backWord">...</div>
                        <div class="card-example" id="exampleText"></div>
                    </div>
                </div>
            </div>
            
            <div class="controls">
                <button class="btn-dont-know" onclick="markCard(false)">‚ùå Didn't Know</button>
                <button class="btn-know" onclick="markCard(true)">‚úÖ Got It</button>
            </div>
            
            <div class="controls">
                <button class="btn-secondary btn-small" onclick="restartQuiz()">üîÑ Restart</button>
            </div>
        </div>
        
        <div id="completeScreen" class="complete-screen hidden">
            <h2>üéâ Session Complete!</h2>
            <div class="complete-score" id="finalScore">0%</div>
            <div class="complete-message" id="finalMessage">Great job!</div>
            
            <div class="controls">
                <button class="btn-know" onclick="restartQuiz()">üîÑ Practice Again</button>
                <button class="btn-secondary" onclick="reviewMissed()">üìñ Review Missed</button>
            </div>
            
            <div class="review-list hidden" id="reviewList">
                <h3>‚ùå Words to Review:</h3>
                <div id="reviewItems"></div>
            </div>
        </div>
    </div>
    
    <div id="wordsTab" class="hidden">
        <div class="word-list" id="wordList"></div>
    </div>
    
    <div class="backup-controls">
        <button class="backup-btn" onclick="exportProgress()">üì§ Export Progress</button>
        <button class="backup-btn" onclick="document.getElementById('importFile').click()">üì• Import Progress</button>
        <input type="file" id="importFile" class="import-input" accept=".json" onchange="importProgress(event)">
    </div>
    
    <button class="reset-btn" onclick="resetProgress()">üóëÔ∏è Reset All Progress</button>

    <script>
        const vocabulary = {
            "2026-02-07": [
                { pt: "despedir-se de", de: "sich verabschieden von", en: "to say goodbye to", example: "Bombeiros despedem-se do seu fiel companheiro" },
                { pt: "fiel", de: "treu", en: "faithful, loyal", example: "Fiel companheiro Flecha" },
                { pt: "o quartel", de: "die Kaserne, das Feuerwehrhaus", en: "the barracks, the fire station", example: "O quartel dos Bombeiros ficou mais silencioso" },
                { pt: "a corpora√ß√£o", de: "das Korps, die K√∂rperschaft", en: "the corps, the corporation", example: "Amigo leal de todos os elementos da corpora√ß√£o" },
                { pt: "insubstitu√≠vel", de: "unersetzlich", en: "irreplaceable", example: "Presen√ßa insubstitu√≠vel no dia a dia" },
                { pt: "o turno", de: "die Schicht", en: "the shift", example: "Nos turnos mais longos" },
                { pt: "transitar em julgado", de: "rechtskr√§ftig werden", en: "to become legally binding", example: "A decis√£o ainda n√£o transitou em julgado" },
                { pt: "a coa√ß√£o", de: "die Zwangsma√ünahme", en: "the coercive measure", example: "Medidas de coa√ß√£o menos gravosas" },
                { pt: "os tr√¢mites legais", de: "die rechtlichen Verfahrensschritte", en: "the legal proceedings", example: "Processo prossegue os seus tr√¢mites legais" },
                { pt: "livre como um passarinho", de: "frei wie ein Vogel", en: "free as a bird", example: "Fernando Madureira livre como um passarinho" },
                { pt: "a prova-ensaio", de: "die Probepr√ºfung", en: "the practice test", example: "Provas-ensaio adiadas para abril" },
                { pt: "a intemp√©rie", de: "die Unwetter, schlechte Witterung", en: "bad weather, storms", example: "Impacto destas intemp√©ries climat√©ricas" },
                { pt: "ultrapassar", de: "√ºberwinden", en: "to overcome", example: "Exige tempo para ser ultrapassado" },
                { pt: "inclusivo/a", de: "inklusiv", en: "inclusive", example: "Tornar a Figueira da Foz mais inclusiva" },
                { pt: "a reinser√ß√£o", de: "die Wiedereingliederung", en: "the reintegration", example: "Programas de reinser√ß√£o social e profissional" },
                { pt: "a sensibiliza√ß√£o", de: "die Sensibilisierung", en: "awareness raising", example: "Iniciativas de sensibiliza√ß√£o" },
                { pt: "a cadeira de rodas", de: "der Rollstuhl", en: "the wheelchair", example: "Andebol em cadeira de rodas" },
                { pt: "o desporto adaptado", de: "der Behindertensport", en: "adaptive sports", example: "Afirmar o desporto inclusivo" },
                { pt: "a desmobiliza√ß√£o", de: "die Demobilisierung", en: "the demobilization", example: "Poss√≠vel desmobiliza√ß√£o da ida √†s urnas" },
                { pt: "as urnas", de: "die Wahlurnen", en: "the ballot boxes", example: "Ventura afasta responsabilidade de baixa ida √†s urnas" },
                { pt: "a absten√ß√£o", de: "die Enthaltung, Nichtwahl", en: "abstention, non-voting", example: "Aumento da absten√ß√£o no domingo" },
                { pt: "devastado/a", de: "verw√ºstet", en: "devastated", example: "Metade do pa√≠s devastado pela tempestade" },
                { pt: "a todo o custo", de: "um jeden Preis", en: "at all costs", example: "Manter as elei√ß√µes a todo o custo" },
                { pt: "dar visibilidade", de: "Sichtbarkeit geben", en: "to give visibility", example: "Dar essa ajuda e essa visibilidade" }
            ],
            "2026-02-06": [
                { pt: "a correnteza", de: "die Str√∂mung", en: "the current", example: "Apesar do elevado risco provocado pelo caudal e da correnteza" },
                { pt: "acionado/a", de: "alarmiert, eingesetzt", en: "alerted, deployed", example: "Os militares foram acionados ap√≥s a den√∫ncia" },
                { pt: "acorrer", de: "zu Hilfe eilen, unterst√ºtzen", en: "to rush to help, support", example: "Poder acorrer √†s suas necessidades" },
                { pt: "moroso/a", de: "langwierig, langsam", en: "lengthy, slow", example: "Zonas que tornam mais morosa esta tarefa de reposi√ß√£o" },
                { pt: "expedito/a", de: "z√ºgig, schnell", en: "swift, quick", example: "De forma r√°pida e expedita" },
                { pt: "o/a arguido/a", de: "der/die Beschuldigte, Angeklagte", en: "the accused, defendant", example: "Casal foi constitu√≠do arguido pelo crime de furto" },
                { pt: "encetar", de: "einleiten, beginnen", en: "to initiate, begin", example: "Encetaram dilig√™ncias para intercetar a viatura" },
                { pt: "as dilig√™ncias", de: "die Ermittlungen, Nachforschungen", en: "the investigations, inquiries", example: "Encetaram dilig√™ncias com o intuito de..." },
                { pt: "intercetar", de: "abfangen", en: "to intercept", example: "Proceder √† interce√ß√£o da viatura suspeita" },
                { pt: "restituir", de: "zur√ºckgeben, erstatten", en: "to return, refund", example: "Restitu√≠do ao seu leg√≠timo propriet√°rio" },
                { pt: "a empreitada", de: "das Bauvorhaben, der Bauauftrag", en: "the construction project, contract", example: "Auto de consigna√ß√£o da empreitada de requalifica√ß√£o" },
                { pt: "a patologia", de: "der Mangel, Schaden (Bau)", en: "the defect, damage (construction)", example: "Cobertura que apresenta diversas patologias" },
                { pt: "a amplia√ß√£o", de: "die Erweiterung", en: "the expansion", example: "Consiste na amplia√ß√£o da USF" },
                { pt: "a consigna√ß√£o", de: "die √úbergabe, Konsignation", en: "the handover, consignment", example: "Auto de consigna√ß√£o da empreitada" },
                { pt: "apelativo/a", de: "ansprechend, attraktiv", en: "appealing, attractive", example: "Ambiente apelativo, acess√≠vel e estimulante" },
                { pt: "a literacia", de: "die Lesekompetenz", en: "literacy", example: "Promover a leitura, a literacia e o desenvolvimento" },
                { pt: "disseminado/a", de: "verbreitet, verteilt", en: "spread, distributed", example: "Pontos biblioteca disseminados pelas escolas" },
                { pt: "sem precedentes", de: "beispiellos", en: "unprecedented", example: "Apoios avan√ßam com rapidez sem precedentes" },
                { pt: "ao seu alcance", de: "in seiner Reichweite", en: "within his reach", example: "Fazer tudo o que est√° ao seu alcance" }
            ],
            "2026-02-05": [
                { pt: "resgatar", de: "retten", en: "to rescue", example: "89 pessoas resgatadas da cheia do rio Sado" },
                { pt: "o efetivo", de: "das Personal, die Einsatzkr√§fte", en: "the personnel, emergency forces", example: "Um total de cerca de 80 elementos de efetivo" },
                { pt: "acudir", de: "zu Hilfe eilen", en: "to rush to help", example: "Se o Estado n√£o acudir √†s pessoas" },
                { pt: "pernoitar", de: "√ºbernachten", en: "to stay overnight", example: "Locais para pernoitar e se alimentar" },
                { pt: "a brevidade", de: "die K√ºrze", en: "the brevity", example: "Retoma na brevidade poss√≠vel" },
                { pt: "proferir", de: "verk√ºnden, aussprechen", en: "to pronounce, declare", example: "STJ profere ac√≥rd√£o no caso do juiz" },
                { pt: "o ac√≥rd√£o", de: "das Urteil, der Gerichtsbeschluss", en: "the verdict, court ruling", example: "Ac√≥rd√£o agendado para as 14:30" },
                { pt: "jubilado/a", de: "im Ruhestand, pensioniert", en: "retired", example: "Juiz conselheiro jubilado" },
                { pt: "escrutinar", de: "pr√ºfen, √ºberpr√ºfen", en: "to examine, scrutinize", example: "Acusa√ß√£o foi escrutinada na fase de instru√ß√£o" },
                { pt: "adiar", de: "verschieben", en: "to postpone", example: "Associa√ß√£o de Futebol adia jogos" },
                { pt: "retomar", de: "wiederaufnehmen", en: "to resume", example: "Em Coimbra retomam-se provas" },
                { pt: "o recinto", de: "die Anlage, das Gel√§nde", en: "the facility, grounds", example: "Recupera√ß√£o dos recintos desportivos" },
                { pt: "o levantamento", de: "die Erhebung, Bestandsaufnahme", en: "the survey, assessment", example: "Levantamento efetuado dos danos" },
                { pt: "a acredita√ß√£o", de: "die Akkreditierung", en: "the accreditation", example: "ESTeSC-IPC obteve acredita√ß√£o do INEM" },
                { pt: "o apag√£o", de: "der Stromausfall (gro√üfl√§chig)", en: "the blackout (widespread)", example: "Cuba sofre colapso parcial ‚Äî novo apag√£o" },
                { pt: "a avaria", de: "der Defekt, die Panne", en: "the defect, breakdown", example: "Centrais fora de servi√ßo devido a avarias" },
                { pt: "na brevidade poss√≠vel", de: "so schnell wie m√∂glich", en: "as soon as possible", example: "Retoma na brevidade poss√≠vel" },
                { pt: "fora de servi√ßo", de: "au√üer Betrieb", en: "out of service", example: "Centrais termoel√©tricas fora de servi√ßo" }
            ],
            "2026-02-04": [
                { pt: "a rajada", de: "die B√∂e", en: "the gust", example: "Rajada de 178 km/hora" },
                { pt: "a portagem", de: "die Maut", en: "the toll", example: "Isen√ß√£o de portagens durante uma semana" },
                { pt: "a m√£o-de-obra", de: "die Arbeitskraft", en: "the workforce, labor", example: "Exigem materiais e m√£o-de-obra qualificada" },
                { pt: "o tro√ßo", de: "der Abschnitt", en: "the section", example: "Quatro tro√ßos das autoestradas" },
                { pt: "ressalvar", de: "einschr√§nken, vorbehaltlich hinzuf√ºgen", en: "to qualify, add reservations", example: "Ressalvando que houve melhorias desde 2017" },
                { pt: "as estremas", de: "die Grenzlinien (eines Grundst√ºcks)", en: "the boundary lines (of a property)", example: "Os limites dos terrenos ‚Äî as chamadas estremas" },
                { pt: "o talude", de: "die B√∂schung", en: "the embankment, slope", example: "A desloca√ß√£o de taludes" },
                { pt: "o pr√©dio r√∫stico", de: "das landwirtschaftliche Grundst√ºck", en: "the rural property", example: "Pr√©dios r√∫sticos do concelho" },
                { pt: "ponderar", de: "abw√§gen, erw√§gen", en: "to weigh, consider", example: "Quem exerce o poder executivo ponderou isso" },
                { pt: "a calamidade", de: "die Katastrophe", en: "the catastrophe, calamity", example: "68 concelhos em calamidade" },
                { pt: "a isen√ß√£o", de: "die Befreiung", en: "the exemption", example: "Isen√ß√£o de portagens" },
                { pt: "a artroplastia", de: "die Gelenkersatzoperation", en: "joint replacement surgery", example: "Artroplastia total do joelho" },
                { pt: "a mascote", de: "das Maskottchen", en: "the mascot", example: "Uni√£o, mascote conhecida do IPC" },
                { pt: "acarinhado/a", de: "liebgewonnen", en: "beloved, cherished", example: "Mascote acarinhada por tantos" },
                { pt: "a prostra√ß√£o", de: "die Ersch√∂pfung, Schw√§che", en: "exhaustion, weakness", example: "Sinais de prostra√ß√£o e febre" },
                { pt: "do tempo da Maria Cachucha", de: "uralt, veraltet", en: "ancient, outdated", example: "Marcelo criticou postes de eletricidade 'do tempo da Maria Cachucha'" }
            ],
            "manual": [
                { pt: "reformado", de: "Rentner", en: "retiree, pensioner", example: "O meu av√¥ √© reformado h√° cinco anos" },
                { pt: "apetecer", de: "schmecken, Lust haben", en: "to taste, to feel like", example: "Apetece-me um caf√©" },
                { pt: "N√£o me apetece", de: "Ich habe keine Lust dazu", en: "I don't feel like it", example: "N√£o me apetece sair hoje" },
                { pt: "N√£o estou com vontade", de: "Ich habe keine Lust", en: "I don't feel like it", example: "N√£o estou com vontade de trabalhar" },
                { pt: "parir", de: "geb√§ren", en: "to give birth", example: "A gata pariu cinco gatinhos" },
                { pt: "vigarista", de: "Betr√ºger, Gauner", en: "fraudster, crook", example: "Aquele vigarista roubou-me o dinheiro" },
                { pt: "valente", de: "mutig, tapfer", en: "brave, courageous", example: "O bombeiro foi muito valente" },
                { pt: "doido", de: "irre, verr√ºckt", en: "crazy, insane", example: "Est√°s doido? Isso √© perigoso!" },
                { pt: "raspar", de: "rasieren, kratzen", en: "to shave, scratch", example: "Vou raspar a barba" },
                { pt: "ninho", de: "Nest, H√∂hle", en: "nest, den", example: "O p√°ssaro construiu um ninho na √°rvore" },
                { pt: "mi√∫do", de: "klein, winzig", en: "small, tiny", example: "O apartamento √© muito mi√∫do" },
                { pt: "√¢ngulo", de: "Winkel", en: "angle", example: "V√™ a situa√ß√£o de outro √¢ngulo" },
                { pt: "cabedal", de: "Leder", en: "leather", example: "Comprei uma carteira de cabedal" },
                { pt: "burla", de: "Betrug", en: "fraud", example: "Foi v√≠tima de uma burla online" },
                { pt: "roer", de: "nagen", en: "to gnaw", example: "O c√£o gosta de roer ossos" },
                { pt: "engolir", de: "schlucken, fressen", en: "to swallow, devour", example: "Engoli a comida sem mastigar" },
                { pt: "sapo", de: "Kr√∂te", en: "toad", example: "Vi um sapo no jardim" },
                { pt: "engolir sapo", de: "gute Miene zum b√∂sen Spiel machen", en: "to grin and bear it", example: "Tive de engolir o sapo e aceitar" },
                { pt: "pardal", de: "Spatz, Sperling", en: "sparrow", example: "Os pardais cantam de manh√£" },
                { pt: "pulga", de: "Floh", en: "flea", example: "O c√£o tem pulgas" },
                { pt: "selo", de: "Briefmarke", en: "stamp", example: "Preciso de um selo para a carta" },
                { pt: "torcido", de: "krumm", en: "crooked", example: "O prego est√° torcido" },
                { pt: "tecido", de: "Stoff, Gewebe", en: "fabric, tissue", example: "Este tecido √© muito suave" },
                { pt: "enfurecer-se", de: "w√ºtend werden", en: "to get angry", example: "Ele enfureceu-se com a not√≠cia" },
                { pt: "desistir", de: "aufgeben", en: "to give up", example: "Nunca vou desistir dos meus sonhos" },
                { pt: "impedir", de: "verhindern", en: "to prevent", example: "A pol√≠cia impediu o assalto" },
                { pt: "atirar", de: "werfen, schie√üen", en: "to throw, shoot", example: "Atirou a bola para o ar" },
                { pt: "rafeiro", de: "K√∂ter", en: "mutt", example: "Adot√°mos um rafeiro do canil" },
                { pt: "risonho", de: "lachend", en: "laughing", example: "Ela tem um rosto risonho" },
                { pt: "ladrar", de: "bellen", en: "to bark", example: "O c√£o n√£o para de ladrar" },
                { pt: "incomodar", de: "st√∂ren", en: "to disturb", example: "Desculpe incomodar, mas preciso de ajuda" },
                { pt: "espernear", de: "zappeln", en: "to wriggle", example: "O beb√© n√£o para de espernear" },
                { pt: "gemer", de: "st√∂hnen", en: "to groan", example: "Ouvi-o gemer de dor" },
                { pt: "afligir", de: "qu√§len", en: "to torment", example: "N√£o te aflijas, vai correr tudo bem" },
                { pt: "bocejar", de: "g√§hnen", en: "to yawn", example: "Estou t√£o cansado que n√£o paro de bocejar" },
                { pt: "ressonar", de: "schnarchen", en: "to snore", example: "O meu pai ressona muito alto" },
                { pt: "ratazana", de: "Ratte", en: "rat", example: "Vi uma ratazana no esgoto" },
                { pt: "papa-formigas", de: "Ameisenb√§r", en: "anteater", example: "O papa-formigas come milhares de formigas por dia" },
                { pt: "fato", de: "Anzug", en: "suit", example: "Vou usar fato e gravata na entrevista" },
                { pt: "avisar", de: "warnen", en: "to warn", example: "Avisei-te que isso ia acontecer" },
                { pt: "Socorro!", de: "Hilfe!", en: "Help!", example: "Socorro! Preciso de ajuda!" },
                { pt: "chiar", de: "piepen", en: "to squeak", example: "A porta chia quando abre" },
                { pt: "minhoca", de: "Regenwurm", en: "earthworm", example: "Encontrei uma minhoca no jardim" },
                { pt: "lagarta", de: "Raupe", en: "caterpillar", example: "A lagarta vai transformar-se em borboleta" },
                { pt: "tapar", de: "verdecken", en: "to cover", example: "Tapa os olhos, tenho uma surpresa" },
                { pt: "tobo√°gua", de: "Wasserrutsche", en: "water slide", example: "As crian√ßas adoram o tobo√°gua" },
                { pt: "cabana", de: "H√ºtte", en: "cabin, hut", example: "Dormimos numa cabana na montanha" },
                { pt: "morder", de: "bei√üen", en: "to bite", example: "Cuidado, o c√£o pode morder" },
                { pt: "rastro", de: "Spur", en: "trail, track", example: "Seguimos o rastro do animal" },
                { pt: "rosnar", de: "knurren", en: "to growl", example: "O c√£o rosnou para o estranho" },
                { pt: "estrondo", de: "Knall", en: "bang", example: "Ouvi um estrondo enorme" },
                { pt: "malvado", de: "b√∂sartig", en: "malicious, evil", example: "O vil√£o do filme √© muito malvado" },
                { pt: "lagarto", de: "Eidechse", en: "lizard", example: "Vi um lagarto a apanhar sol" },
                { pt: "prevenir", de: "verhindern", en: "to prevent", example: "√â melhor prevenir do que remediar" },
                { pt: "ranho", de: "Rotz", en: "snot", example: "Limpa o ranho do nariz" },
                { pt: "ranhosos", de: "Rotznasen", en: "snotty noses", example: "Os mi√∫dos ranhosos est√£o a brincar" },
                { pt: "arrepender-se", de: "bereuen", en: "to regret", example: "Vais arrepender-te dessa decis√£o" },
                { pt: "destacar-se", de: "sich profilieren", en: "to stand out", example: "Ela destaca-se pela sua intelig√™ncia" },
                { pt: "destacar", de: "hervorheben", en: "to highlight", example: "Quero destacar este ponto importante" },
                { pt: "estar prestes a", de: "im Begriff sein zu", en: "to be about to", example: "Estou prestes a sair de casa" },
                { pt: "desenho animado", de: "Trickfilm", en: "cartoon", example: "As crian√ßas est√£o a ver desenhos animados" },
                { pt: "irritante", de: "nervig, √§rgerlich", en: "annoying", example: "Esse barulho √© muito irritante" },
                { pt: "insuport√°vel", de: "unausstehlich", en: "unbearable", example: "O calor est√° insuport√°vel" },
                { pt: "sarnento", de: "r√§udig", en: "mangy", example: "Encontr√°mos um c√£o sarnento na rua" },
                { pt: "am√°vel", de: "freundlich, lieb", en: "kind, friendly", example: "Ela foi muito am√°vel comigo" },
                { pt: "amabilidade", de: "Freundlichkeit, G√ºte", en: "kindness", example: "Agrade√ßo a sua amabilidade" },
                { pt: "imprest√°vel", de: "unn√ºtz", en: "useless", example: "Esta ferramenta √© imprest√°vel" },
                { pt: "pregui√ßoso", de: "faul", en: "lazy", example: "Hoje estou muito pregui√ßoso" },
                { pt: "nojento", de: "eklig, √ºbel", en: "disgusting", example: "Esse cheiro √© nojento" },
                { pt: "feio", de: "h√§sslich", en: "ugly", example: "Esse edif√≠cio √© muito feio" },
                { pt: "inqu√©rito", de: "Recherche, Befragung", en: "investigation, survey", example: "A pol√≠cia abriu um inqu√©rito" },
                { pt: "genro", de: "Schwiegersohn", en: "son-in-law", example: "O meu genro √© muito simp√°tico" },
                { pt: "c√¥njuge", de: "Gatte", en: "spouse", example: "Apresento-lhe o meu c√¥njuge" },
                { pt: "escarro", de: "Schleim", en: "phlegm, mucus", example: "N√£o cuspa escarros no ch√£o" },
                { pt: "esdr√∫xulo", de: "seltsam", en: "bizarre, strange", example: "Que situa√ß√£o esdr√∫xula!" },
                { pt: "bagulho", de: "Traubenkern", en: "grape seed", example: "Cuidado com os bagulhos das uvas" },
                { pt: "sovaco", de: "Achsel", en: "armpit", example: "Pus desodorizante nos sovacos" },
                { pt: "retrete", de: "Schei√ühaus", en: "toilet (vulgar)", example: "A retrete est√° entupida" },
                { pt: "macio", de: "weich", en: "soft", example: "Este tecido √© muito macio" },
                { pt: "liso", de: "glatt", en: "smooth", example: "A estrada est√° lisa por causa do gelo" },
                { pt: "cadeia", de: "Gef√§ngnis, Netzwerk, Haft", en: "prison, chain, custody", example: "Ele foi condenado a cadeia" },
                { pt: "cadeia alimentar", de: "Nahrungskette", en: "food chain", example: "Os le√µes est√£o no topo da cadeia alimentar" },
                { pt: "embebedar-se", de: "sich betrinken", en: "to get drunk", example: "Ele embebedou-se na festa" },
                { pt: "esperto", de: "clever, smart", en: "clever, smart", example: "Esse mi√∫do √© muito esperto" },
                { pt: "sarilho", de: "√Ñrger", en: "trouble", example: "Meteu-se num grande sarilho" },
                { pt: "acreditar", de: "glauben", en: "to believe", example: "N√£o acredito no que estou a ver" },
                { pt: "apoio", de: "Unterst√ºtzung", en: "support", example: "Agrade√ßo o teu apoio" },
                { pt: "abeced√°rio", de: "Alphabet", en: "alphabet", example: "As crian√ßas aprendem o abeced√°rio" },
                { pt: "rebanho", de: "Herde", en: "herd, flock", example: "O pastor cuida do rebanho" },
                { pt: "adivinha", de: "R√§tsel", en: "riddle", example: "Tenho uma adivinha para ti" },
                { pt: "contente", de: "froh, gl√ºcklich, zufrieden", en: "happy, content", example: "Estou muito contente com o resultado" },
                { pt: "meta", de: "Ziel", en: "goal", example: "A minha meta √© correr uma maratona" },
                { pt: "bramir", de: "br√ºllen", en: "to roar", example: "O le√£o bramiu na selva" },
                { pt: "bramar", de: "toben", en: "to rage", example: "O mar brama com a tempestade" },
                { pt: "fugir", de: "fliehen, fl√ºchten, entkommen", en: "to flee, escape", example: "O ladr√£o fugiu da pol√≠cia" },
                { pt: "previsto", de: "vorgesehen, planm√§√üig", en: "planned, scheduled", example: "Tudo correu como previsto" },
                { pt: "abafar", de: "ersticken", en: "to suffocate", example: "O calor est√° a abafar-me" },
                { pt: "erguer-se", de: "wachsen, sich erheben", en: "to grow, rise up", example: "O edif√≠cio ergue-se no centro da cidade" },
                { pt: "escuro", de: "dunkel, tr√ºbe", en: "dark, dim", example: "O quarto est√° muito escuro" },
                { pt: "desanimado", de: "leblos", en: "lifeless, dejected", example: "Sinto-me desanimado hoje" },
                { pt: "t√©dio", de: "Langeweile, tote Hose", en: "boredom", example: "Morri de t√©dio na aula" },
                { pt: "liderar", de: "f√ºhren", en: "to lead", example: "Ela lidera a equipa com sucesso" },
                { pt: "perda", de: "Verlust, Untergang", en: "loss, ruin", example: "A perda do emprego foi dif√≠cil" },
                { pt: "tencionar", de: "beabsichtigen, vorhaben", en: "to intend", example: "Tenciono viajar no ver√£o" },
                { pt: "aterrado", de: "entsetzt", en: "terrified", example: "Fiquei aterrado com a not√≠cia" },
                { pt: "aterragem de emerg√™ncia", de: "Notlandung", en: "emergency landing", example: "O avi√£o fez uma aterragem de emerg√™ncia" },
                { pt: "permanecer", de: "bleiben, verweilen, verharren", en: "to stay, remain", example: "Vou permanecer aqui mais um pouco" },
                { pt: "permanecer calmo", de: "ruhig bleiben", en: "to stay calm", example: "Tenta permanecer calmo" },
                { pt: "espregui√ßadeira", de: "Liegestuhl", en: "deck chair", example: "Relaxei na espregui√ßadeira √† beira da piscina" },
                { pt: "empatado", de: "unentschieden", en: "tied, drawn", example: "O jogo ficou empatado" },
                { pt: "lagartixa", de: "Gecko", en: "gecko", example: "H√° uma lagartixa na parede" },
                { pt: "enxaqueca", de: "Migr√§ne", en: "migraine", example: "Tenho uma enxaqueca terr√≠vel" },
                { pt: "sogros", de: "Schwiegereltern", en: "parents-in-law", example: "Vou jantar com os sogros" },
                { pt: "ap√≥s", de: "nach", en: "after", example: "Ap√≥s o jantar, vamos passear" },
                { pt: "dia ap√≥s dia", de: "Tag f√ºr Tag", en: "day after day", example: "Dia ap√≥s dia, ele melhora" },
                { pt: "trocadilho", de: "Wortspiel", en: "pun, wordplay", example: "Esse trocadilho foi muito bom" },
                { pt: "nev√£o", de: "Schneesturm", en: "snowstorm", example: "O nev√£o bloqueou as estradas" },
                { pt: "exprimir", de: "√§u√üern, ausdr√ºcken", en: "to express", example: "N√£o sei como exprimir o que sinto" },
                { pt: "Marte", de: "Mars", en: "Mars", example: "Marte √© o planeta vermelho" },
                { pt: "martelo", de: "Hammer", en: "hammer", example: "Preciso de um martelo para pregar" },
                { pt: "urso de peluche", de: "Teddyb√§r", en: "teddy bear", example: "A crian√ßa dorme com o urso de peluche" },
                { pt: "desafiar", de: "herausfordern", en: "to challenge", example: "Vou desafiar-te para um jogo" },
                { pt: "desafio", de: "Herausforderung", en: "challenge", example: "Este projeto √© um grande desafio" },
                { pt: "quadro de an√∫ncios", de: "Pinnwand", en: "bulletin board", example: "Pus o aviso no quadro de an√∫ncios" },
                { pt: "invejoso", de: "neidisch", en: "envious, jealous", example: "N√£o sejas invejoso do sucesso dos outros" },
                { pt: "padrasto", de: "Stiefvater", en: "stepfather", example: "O meu padrasto trata-me como filho" },
                { pt: "madrasta", de: "Stiefmutter", en: "stepmother", example: "A madrasta da Cinderela era m√°" },
                { pt: "cartaz", de: "Poster", en: "poster", example: "Vi um cartaz do concerto" },
                { pt: "avariar", de: "ausfallen (nicht funktionieren)", en: "to break down", example: "O carro avariou na autoestrada" },
                { pt: "abatimento", de: "Rabatt, Nachlass", en: "discount", example: "Consegui um abatimento de 20%" },
                { pt: "auscultadores", de: "Kopfh√∂rer", en: "headphones", example: "Perdi os meus auscultadores" },
                { pt: "consertar", de: "reparieren", en: "to repair", example: "Vou consertar o telem√≥vel" },
                { pt: "alagar", de: "fluten, √ºberschwemmen", en: "to flood", example: "A chuva alagou as ruas" },
                { pt: "surpreender", de: "√ºberraschen", en: "to surprise", example: "Quero surpreender-te com um presente" },
                { pt: "Poxa!", de: "Mist!", en: "Darn!", example: "Poxa! Esqueci-me das chaves" },
                { pt: "vontade", de: "Lust, Wille", en: "desire, will", example: "Tenho vontade de comer gelado" },
                { pt: "Fique √† vontade!", de: "F√ºhlen Sie sich wie zu Hause!", en: "Make yourself at home!", example: "Fique √† vontade, sirva-se" },
                { pt: "contra a vontade", de: "gezwungenerma√üen", en: "reluctantly, unwillingly", example: "Fiz isso contra a minha vontade" },
                { pt: "esgotado", de: "ausverkauft", en: "sold out", example: "Os bilhetes est√£o esgotados" },
                { pt: "remo", de: "Rudern, Ruder", en: "rowing, oar", example: "Gosto de fazer remo no rio" },
                { pt: "remar", de: "rudern", en: "to row", example: "Vamos remar at√© √† outra margem" },
                { pt: "caro√ßo", de: "Saat, Knoten, Kern", en: "seed, pit, core", example: "Cuidado com o caro√ßo do p√™ssego" },
                { pt: "sem caro√ßo", de: "kernlos", en: "seedless", example: "Prefiro uvas sem caro√ßo" },
                { pt: "coitado", de: "arm, miserabel", en: "poor, pitiful", example: "Coitado, est√° doente" },
                { pt: "descolagem", de: "Start, Abflug", en: "takeoff, departure", example: "A descolagem foi atrasada" }
            ],
            "2026-02-03": [
                { pt: "a bacia", de: "das Becken, das Einzugsgebiet", en: "the basin, catchment area", example: "Gest√£o da bacia do Mondego" },
                { pt: "hidrol√≥gico/a", de: "hydrologisch", en: "hydrological", example: "Situa√ß√£o hidrol√≥gica naquela regi√£o" },
                { pt: "a √©gide", de: "die √Ñgide, die Schirmherrschaft", en: "the aegis, patronage", example: "Sob a √©gide das comunidades intermunicipais" },
                { pt: "o leito", de: "das Flussbett", en: "the riverbed", example: "Eleva√ß√£o progressiva do leito do rio" },
                { pt: "a montante", de: "flussaufw√§rts", en: "upstream", example: "Barragem a montante da Aguieira" },
                { pt: "o tribut√°rio", de: "der Nebenfluss", en: "the tributary", example: "Interven√ß√£o equivalente nos seus tribut√°rios" },
                { pt: "o paliativo", de: "das Linderungsmittel, Notl√∂sung", en: "the palliative, stopgap", example: "N√£o andarmos sempre com paliativos" },
                { pt: "a fragilidade", de: "die Schw√§che, Anf√§lligkeit", en: "the weakness, vulnerability", example: "Exp√µe as fragilidades estruturais" },
                { pt: "hidroagr√≠cola", de: "landwirtschaftliche Wasserwirtschaft", en: "agricultural water management", example: "Obra hidroagr√≠cola do Baixo Mondego" },
                { pt: "o piquete", de: "der Bereitschaftstrupp", en: "the standby crew", example: "Piquetes da E-Redes no local" },
                { pt: "o deslizamento", de: "der Erdrutsch", en: "the landslide", example: "Deslizamento de terras" },
                { pt: "a imin√™ncia", de: "das Bevorstehen", en: "the imminence", example: "Na imin√™ncia de rebentamento" },
                { pt: "o espig√£o", de: "der St√ºtzpfeiler, Buhne", en: "the support pillar, groyne", example: "Os espig√µes est√£o a debitar √°gua" },
                { pt: "debitar", de: "abflie√üen lassen", en: "to discharge", example: "Espig√µes a debitar √°gua" },
                { pt: "o sufr√°gio", de: "die Wahl, Abstimmung", en: "the election, vote", example: "Segunda volta do sufr√°gio presidencial" },
                { pt: "a sondagem", de: "die Umfrage", en: "the poll, survey", example: "Sondagem d√° vantagem a Seguro" },
                { pt: "o mandato", de: "das Mandat, die Amtszeit", en: "the mandate, term", example: "Segundo mandato" },
                { pt: "a fundo perdido", de: "als verlorener Zuschuss", en: "as a non-refundable grant", example: "Apoios a fundo perdido" },
                { pt: "em cima da mesa", de: "auf dem Tisch, zur Diskussion", en: "on the table, up for discussion", example: "Ter isto em cima da mesa" },
                { pt: "absolutamente inaceit√°vel", de: "absolut inakzeptabel", en: "absolutely unacceptable", example: "Falta de obras absolutamente inaceit√°vel" }
            ],
            "2026-02-02": [
                { pt: "a grua", de: "der Kran", en: "the crane", example: "Grua cai e atinge pr√©dio" },
                { pt: "desalojado/a", de: "obdachlos, vertrieben", en: "homeless, displaced", example: "A tempestade provocou desalojados" },
                { pt: "pernoitar", de: "√ºbernachten", en: "to stay overnight", example: "Locais para pernoitar" },
                { pt: "o ref√∫gio", de: "die Zuflucht", en: "the refuge", example: "Ponto de ref√∫gio para as popula√ß√µes" },
                { pt: "a cota", de: "der Pegelstand", en: "the water level", example: "Abaixo da cota de seguran√ßa" },
                { pt: "o caudal", de: "der Wasserdurchfluss", en: "the water flow", example: "Aumento do caudal do rio" },
                { pt: "o disparo", de: "der Schuss", en: "the shot", example: "Atingida por quatro disparos" },
                { pt: "acionado/a", de: "alarmiert, eingesetzt", en: "alerted, deployed", example: "Pol√≠cia Judici√°ria foi acionada" },
                { pt: "o ferimento", de: "die Verletzung", en: "the injury", example: "N√£o resistiu aos ferimentos" },
                { pt: "a autoprote√ß√£o", de: "der Selbstschutz", en: "self-protection", example: "Comportamentos de autoprote√ß√£o" },
                { pt: "o falhan√ßo", de: "der Misserfolg, Reinfall", en: "the failure, flop", example: "Falhan√ßo em toda a linha" },
                { pt: "o autarca", de: "der Kommunalpolitiker", en: "the local politician", example: "A autarca salientou que..." },
                { pt: "ribeirinho/a", de: "am Flussufer gelegen", en: "riverside, riverbank", example: "Zona ribeirinha do Mondego" },
                { pt: "a margem", de: "das Ufer", en: "the bank, shore", example: "Localidades nas margens do Mondego" },
                { pt: "em atualiza√ß√£o", de: "wird aktualisiert", en: "being updated", example: "Not√≠cia em atualiza√ß√£o" },
                { pt: "pelos pr√≥prios meios", de: "aus eigenen Mitteln, selbstst√§ndig", en: "by one's own means, independently", example: "Foram alojados pelos pr√≥prios meios" }
            ],
            "2026-01-30": [
                { pt: "a derrocada", de: "der Erdrutsch", en: "the landslide", example: "Carrinha projetada ap√≥s derrocada" },
                { pt: "submerso/a", de: "unter Wasser, √ºberflutet", en: "underwater, flooded", example: "A carrinha est√° a ficar submersa" },
                { pt: "o lama√ßal", de: "der Schlamm, die Schlammgrube", en: "the mud, mudpit", example: "Docas transformadas num lama√ßal" },
                { pt: "a limpeza", de: "die Reinigung", en: "the cleaning", example: "Procedem √†s limpezas" },
                { pt: "amea√ßar", de: "bedrohen", en: "to threaten", example: "Chuva amea√ßa repetir drama" },
                { pt: "o rescaldo", de: "die Nachwirkung, die Folgen", en: "the aftermath, consequences", example: "O rescaldo da tempestade" },
                { pt: "a torneira", de: "der Wasserhahn", en: "the tap, faucet", example: "N√£o beba √°gua da torneira" },
                { pt: "encerrado/a", de: "geschlossen", en: "closed", example: "Edif√≠cios encerrados" },
                { pt: "a estufa", de: "das Gew√§chshaus", en: "the greenhouse", example: "Inc√™ndio denunciar estufa" },
                { pt: "disparar", de: "in die H√∂he schie√üen", en: "to skyrocket", example: "Viol√™ncia nas escolas dispara" },
                { pt: "prestar homenagem", de: "Tribut zollen, w√ºrdigen", en: "to pay tribute", example: "Governo presta homenagem" },
                { pt: "o joelho", de: "das Knie", en: "the knee", example: "√Ågua pelo joelho" }
            ],
            "2025-01-29": [
                { pt: "a tempestade", de: "der Sturm", en: "the storm", example: "A tempestade causou estragos" },
                { pt: "o mau tempo", de: "das schlechte Wetter", en: "bad weather", example: "Devido ao mau tempo" },
                { pt: "a cheia", de: "die √úberschwemmung", en: "the flood", example: "Cheias no rio Mondego" },
                { pt: "o dique", de: "der Deich", en: "the dike, levee", example: "Dique em risco de rebentar" },
                { pt: "rebentar", de: "brechen, platzen", en: "to break, burst", example: "Em risco de rebentar" },
                { pt: "o muro", de: "die Mauer", en: "the wall", example: "Muro desaba" },
                { pt: "desabar", de: "einst√ºrzen", en: "to collapse", example: "Muro desaba e esmaga carros" },
                { pt: "os estragos", de: "die Sch√§den", en: "the damages", example: "Efeitos da tempestade ser√£o vultuosos" },
                { pt: "cortada/o", de: "gesperrt", en: "blocked, closed", example: "Esta rua est√° cortada" },
                { pt: "o resgate", de: "die Rettung", en: "the rescue", example: "Resgate de cavalos" },
                { pt: "interditado", de: "gesperrt, verboten", en: "closed, prohibited", example: "Col√©gio das Artes interditado" },
                { pt: "a queda", de: "der Fall, Sturz", en: "the fall", example: "Queda de elementos" },
                { pt: "causar", de: "verursachen", en: "to cause", example: "Tempestade causa estragos" },
                { pt: "sofrer", de: "erleiden", en: "to suffer", example: "Pode sofrer perturba√ß√µes" },
                { pt: "esmagar", de: "zerquetschen", en: "to crush", example: "Esmaga carros" },
                { pt: "continuar", de: "weitermachen", en: "to continue", example: "Continuam √†s escuras" },
                { pt: "√†s escuras", de: "im Dunkeln (ohne Strom)", en: "in the dark (without power)", example: "34 mil clientes continuam √†s escuras" },
                { pt: "devido a", de: "wegen, aufgrund", en: "because of, due to", example: "Devido ao mau tempo" },
                { pt: "em risco de", de: "in Gefahr zu", en: "at risk of", example: "Em risco de rebentar" }
            ]
        };
        
        // Progress storage
        const STORAGE_KEY = 'flashcards_progress';
        const STREAK_KEY = 'flashcards_streak';
        const DAILY_KEY = 'flashcards_daily';
        const LANG_KEY = 'flashcards_language';
        const WORDS_PER_DAY = 20;
        
        // Language settings
        const FRONT_LANG_KEY = 'flashcards_front_lang';
        const BACK_LANG_KEY = 'flashcards_back_lang';
        
        let frontLang = localStorage.getItem(FRONT_LANG_KEY) || 'pt';
        let backLang = localStorage.getItem(BACK_LANG_KEY) || 'de';
        
        const langLabels = {
            pt: 'Portugu√™s',
            de: 'Deutsch',
            en: 'English'
        };
        
        const langFlags = {
            pt: 'üáµüáπ',
            de: 'üá©üá™',
            en: 'üá¨üáß'
        };
        
        function getCardText(card, lang) {
            if (lang === 'pt') return card.pt;
            if (lang === 'en') return card.en || card.de; // fallback to DE if no EN
            return card.de;
        }
        
        function updateLangSelectors() {
            const frontSelect = document.getElementById('frontLangSelect');
            const backSelect = document.getElementById('backLangSelect');
            
            const newFront = frontSelect.value;
            const newBack = backSelect.value;
            
            // Prevent same language on both sides
            if (newFront === newBack) {
                // If front changed to match back, change back to something else
                const options = ['pt', 'de', 'en'];
                const otherLang = options.find(l => l !== newFront);
                backSelect.value = otherLang;
            }
            
            frontLang = frontSelect.value;
            backLang = backSelect.value;
            
            localStorage.setItem(FRONT_LANG_KEY, frontLang);
            localStorage.setItem(BACK_LANG_KEY, backLang);
            
            // Update current card display
            showCardContent();
            
            // Update word list if visible
            if (!document.getElementById('wordsTab').classList.contains('hidden')) {
                renderWordList();
            }
        }
        
        function initLangSelectors() {
            document.getElementById('frontLangSelect').value = frontLang;
            document.getElementById('backLangSelect').value = backLang;
        }
        
        // Legacy compatibility
        function getTranslation(card) {
            return getCardText(card, backLang);
        }
        
        function getLangLabel() {
            return langLabels[backLang];
        }
        
        function getLangFlag() {
            return langFlags[backLang];
        }
        
        let progress = loadProgress();
        let currentCards = [];
        let currentIndex = 0;
        let correctCount = 0;
        let streak = 0;
        let missedCards = [];
        let isFlipped = false;
        
        function loadProgress() {
            try {
                const saved = localStorage.getItem(STORAGE_KEY);
                return saved ? JSON.parse(saved) : {};
            } catch {
                return {};
            }
        }
        
        function saveProgress() {
            try {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(progress));
                updateDayStreak();
            } catch (e) {
                console.error('Could not save progress', e);
            }
        }
        
        function updateDayStreak() {
            try {
                const streakData = JSON.parse(localStorage.getItem(STREAK_KEY) || '{}');
                const today = new Date().toDateString();
                
                if (streakData.lastPractice !== today) {
                    const yesterday = new Date(Date.now() - 86400000).toDateString();
                    if (streakData.lastPractice === yesterday) {
                        streakData.days = (streakData.days || 0) + 1;
                    } else {
                        streakData.days = 1;
                    }
                    streakData.lastPractice = today;
                    localStorage.setItem(STREAK_KEY, JSON.stringify(streakData));
                }
                
                document.getElementById('dayStreak').textContent = streakData.days || 0;
            } catch (e) {
                console.error('Could not update streak', e);
            }
        }
        
        function getWordKey(card) {
            return card.pt;
        }
        
        function getWordProgress(card) {
            const key = getWordKey(card);
            if (!progress[key]) {
                progress[key] = { correct: 0, incorrect: 0, lastSeen: null };
            }
            return progress[key];
        }
        
        function getMasteryLevel(card) {
            const p = getWordProgress(card);
            const total = p.correct + p.incorrect;
            if (total === 0) return { level: 'new', label: 'New', class: 'mastery-new' };
            const ratio = p.correct / total;
            if (p.correct >= 5 && ratio >= 0.8) return { level: 'mastered', label: 'Mastered ‚≠ê', class: 'mastery-mastered' };
            if (p.correct >= 3 && ratio >= 0.6) return { level: 'familiar', label: 'Familiar', class: 'mastery-familiar' };
            return { level: 'learning', label: 'Learning', class: 'mastery-learning' };
        }
        
        function getAllCards() {
            let all = [];
            for (let date in vocabulary) {
                all = all.concat(vocabulary[date]);
            }
            const seen = new Set();
            return all.filter(card => {
                if (seen.has(card.pt)) return false;
                seen.add(card.pt);
                return true;
            });
        }
        
        function getWeakCards() {
            const all = getAllCards();
            return all.sort((a, b) => {
                const pA = getWordProgress(a);
                const pB = getWordProgress(b);
                const scoreA = pA.correct - pA.incorrect * 2;
                const scoreB = pB.correct - pB.incorrect * 2;
                return scoreA - scoreB;
            });
        }
        
        function getDailyCards() {
            // Check if there's vocabulary for today's date
            const todayKey = new Date().toISOString().split('T')[0]; // "YYYY-MM-DD"
            const todaysVocab = vocabulary[todayKey] || [];
            
            // If today has new vocab, prioritize it!
            if (todaysVocab.length > 0) {
                // Show today's new words first
                const unseenToday = todaysVocab.filter(c => {
                    const p = getWordProgress(c);
                    return p.correct === 0 && p.incorrect === 0;
                });
                
                const seenToday = todaysVocab.filter(c => {
                    const p = getWordProgress(c);
                    return p.correct > 0 || p.incorrect > 0;
                }).sort((a, b) => {
                    const pA = getWordProgress(a);
                    const pB = getWordProgress(b);
                    return (pA.correct - pA.incorrect * 2) - (pB.correct - pB.incorrect * 2);
                });
                
                // Get weak words from ALL previous vocab for review
                const allOther = getAllCards().filter(c => !todaysVocab.includes(c));
                const reviewPrevious = allOther.sort((a, b) => {
                    const pA = getWordProgress(a);
                    const pB = getWordProgress(b);
                    return (pA.correct - pA.incorrect * 2) - (pB.correct - pB.incorrect * 2);
                }).slice(0, WORDS_PER_DAY - todaysVocab.length); // Fill up to 20 total
                
                // Combine: today's unseen first, then today's weak, then review
                return [...unseenToday, ...seenToday, ...reviewPrevious];
            }
            
            // Fallback: no vocab for today, use progressive unlocking system
            let dailyData = {};
            try {
                dailyData = JSON.parse(localStorage.getItem(DAILY_KEY) || '{}');
            } catch {}
            
            if (!dailyData.startDate) {
                dailyData.startDate = new Date().toDateString();
                localStorage.setItem(DAILY_KEY, JSON.stringify(dailyData));
            }
            
            // Calculate days since start
            const startDate = new Date(dailyData.startDate);
            const today = new Date();
            const daysSinceStart = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));
            
            // Unlock words based on days (day 0 = first 20, day 1 = first 40, etc.)
            const allCards = getAllCards();
            const unlockedCount = Math.min((daysSinceStart + 1) * WORDS_PER_DAY, allCards.length);
            
            // Today's NEW batch (the latest 20 unlocked words)
            const previousCount = Math.min(daysSinceStart * WORDS_PER_DAY, allCards.length);
            const todaysBatch = allCards.slice(previousCount, unlockedCount);
            
            // Previous batches (for review)
            const previousBatches = allCards.slice(0, previousCount);
            
            // Prioritize: 1) Unseen words from today's batch, 2) Weak words from today, 3) Weak words from previous
            const unseenBatch = todaysBatch.filter(c => {
                const p = getWordProgress(c);
                return p.correct === 0 && p.incorrect === 0;
            });
            
            const seenBatch = todaysBatch.filter(c => {
                const p = getWordProgress(c);
                return p.correct > 0 || p.incorrect > 0;
            }).sort((a, b) => {
                const pA = getWordProgress(a);
                const pB = getWordProgress(b);
                return (pA.correct - pA.incorrect * 2) - (pB.correct - pB.incorrect * 2);
            });
            
            const reviewPrevious = previousBatches.sort((a, b) => {
                const pA = getWordProgress(a);
                const pB = getWordProgress(b);
                return (pA.correct - pA.incorrect * 2) - (pB.correct - pB.incorrect * 2);
            }).slice(0, WORDS_PER_DAY); // Limit review cards
            
            // Combine: new words first, then today's weak, then previous weak
            return [...unseenBatch, ...seenBatch, ...reviewPrevious];
        }
        
        function getDailyInfo() {
            let dailyData = {};
            try {
                dailyData = JSON.parse(localStorage.getItem(DAILY_KEY) || '{}');
            } catch {}
            
            const startDate = dailyData.startDate ? new Date(dailyData.startDate) : new Date();
            const today = new Date();
            const daysSinceStart = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));
            const allCards = getAllCards();
            const unlockedCount = Math.min((daysSinceStart + 1) * WORDS_PER_DAY, allCards.length);
            const previousCount = Math.min(daysSinceStart * WORDS_PER_DAY, allCards.length);
            const todaysNewCount = unlockedCount - previousCount;
            
            return { 
                day: daysSinceStart + 1, 
                unlocked: unlockedCount, 
                todaysNew: todaysNewCount,
                total: allCards.length 
            };
        }
        
        function updateGlobalStats() {
            const all = getAllCards();
            const mastered = all.filter(c => getMasteryLevel(c).level === 'mastered').length;
            document.getElementById('totalMastered').textContent = mastered;
            document.getElementById('totalWords').textContent = all.length;
            
            try {
                const streakData = JSON.parse(localStorage.getItem(STREAK_KEY) || '{}');
                document.getElementById('dayStreak').textContent = streakData.days || 0;
            } catch {
                document.getElementById('dayStreak').textContent = 0;
            }
        }
        
        function showTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            document.getElementById('practiceTab').classList.toggle('hidden', tab !== 'practice');
            document.getElementById('wordsTab').classList.toggle('hidden', tab !== 'words');
            
            if (tab === 'words') {
                renderWordList();
            }
        }
        
        function renderWordList() {
            const all = getAllCards();
            const html = all.map(card => {
                const mastery = getMasteryLevel(card);
                const p = getWordProgress(card);
                return `
                    <div class="word-item">
                        <div class="word-item-text">
                            <div class="word-item-pt">${langFlags.pt} ${card.pt}</div>
                            <div class="word-item-de">${langFlags.de} ${card.de}</div>
                            <div class="word-item-en">${langFlags.en} ${card.en || '-'}</div>
                        </div>
                        <span class="word-item-mastery ${mastery.class}">${mastery.label}</span>
                    </div>
                `;
            }).join('');
            document.getElementById('wordList').innerHTML = html;
        }
        
        function loadDate() {
            const mode = document.getElementById('dateSelect').value;
            if (mode === 'daily') {
                currentCards = getDailyCards();
                const info = getDailyInfo();
                console.log(`Day ${info.day}: ${info.unlocked}/${info.total} words unlocked`);
            } else if (mode === 'weak') {
                currentCards = getWeakCards();
            } else if (mode === 'all') {
                currentCards = [...getAllCards()];
            } else {
                currentCards = [...(vocabulary[mode] || [])];
            }
            restartQuiz();
        }
        
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        function restartQuiz() {
            const mode = document.getElementById('dateSelect').value;
            if (mode === 'daily') {
                currentCards = getDailyCards();
            } else if (mode === 'weak') {
                currentCards = getWeakCards();
            } else if (mode === 'all') {
                currentCards = [...getAllCards()];
            } else {
                currentCards = [...(vocabulary[mode] || [])];
            }
            
            if (document.getElementById('shuffleMode').checked && mode !== 'weak' && mode !== 'daily') {
                shuffle(currentCards);
            }
            
            currentIndex = 0;
            correctCount = 0;
            streak = 0;
            missedCards = [];
            isFlipped = false;
            
            document.getElementById('cardScreen').classList.remove('hidden');
            document.getElementById('completeScreen').classList.add('hidden');
            document.getElementById('reviewList').classList.add('hidden');
            
            updateStats();
            showCard();
        }
        
        function showCard() {
            if (currentIndex >= currentCards.length) {
                showComplete();
                return;
            }
            
            document.getElementById('flashcard').classList.remove('flipped');
            isFlipped = false;
            
            showCardContent();
            updateStats();
        }
        
        function showCardContent() {
            if (currentIndex >= currentCards.length) {
                showComplete();
                return;
            }
            
            const card = currentCards[currentIndex];
            const mastery = getMasteryLevel(card);
            
            const masteryEl = document.getElementById('frontMastery');
            masteryEl.textContent = mastery.label;
            masteryEl.className = 'card-mastery ' + mastery.class;
            
            const frontText = getCardText(card, frontLang);
            const backText = getCardText(card, backLang);
            
            document.getElementById('frontLang').textContent = langLabels[frontLang];
            document.getElementById('frontWord').textContent = frontText;
            document.getElementById('backLang').textContent = langLabels[backLang];
            document.getElementById('backWord').textContent = backText;
            
            document.getElementById('exampleText').textContent = `"${card.example}"`;
            updateStats();
        }
        
        function flipCard() {
            document.getElementById('flashcard').classList.toggle('flipped');
            isFlipped = !isFlipped;
        }
        
        function markCard(known) {
            // Always record the answer and move to next card
            const card = currentCards[currentIndex];
            const p = getWordProgress(card);
            
            if (known) {
                correctCount++;
                streak++;
                p.correct++;
            } else {
                streak = 0;
                p.incorrect++;
                missedCards.push(card);
            }
            
            p.lastSeen = Date.now();
            saveProgress();
            updateGlobalStats();
            
            currentIndex++;
            
            // Flip card back and fade out
            const flashcard = document.getElementById('flashcard');
            const frontFace = flashcard.querySelector('.card-front');
            const backFace = flashcard.querySelector('.card-back');
            
            flashcard.classList.remove('flipped');
            backFace.classList.add('fade-out');
            isFlipped = false;
            
            setTimeout(() => {
                // After flip, fade out front and update content
                frontFace.classList.add('fade-out');
                backFace.classList.remove('fade-out');
                
                setTimeout(() => {
                    // Update content while faded out
                    showCardContent();
                    frontFace.classList.remove('fade-out');
                    frontFace.classList.add('fade-in');
                    
                    setTimeout(() => {
                        frontFace.classList.remove('fade-in');
                    }, 200);
                }, 200);
            }, 400); // Wait for flip animation
        }
        
        function updateStats() {
            document.getElementById('correctCount').textContent = correctCount;
            document.getElementById('remainingCount').textContent = currentCards.length - currentIndex;
            document.getElementById('streakCount').textContent = streak;
            
            const progress = currentCards.length > 0 ? (currentIndex / currentCards.length) * 100 : 0;
            document.getElementById('progressFill').style.width = progress + '%';
        }
        
        function showComplete() {
            document.getElementById('cardScreen').classList.add('hidden');
            document.getElementById('completeScreen').classList.remove('hidden');
            
            const percentage = Math.round((correctCount / currentCards.length) * 100);
            document.getElementById('finalScore').textContent = percentage + '%';
            
            let message = '';
            if (percentage === 100) message = 'üåü Perfect! Fant√°stico!';
            else if (percentage >= 80) message = 'üí™ Great job! Keep it up!';
            else if (percentage >= 60) message = 'üëç Good progress!';
            else message = 'üìö Keep practicing!';
            
            document.getElementById('finalMessage').textContent = message;
            updateGlobalStats();
        }
        
        function reviewMissed() {
            const reviewList = document.getElementById('reviewList');
            const reviewItems = document.getElementById('reviewItems');
            
            if (missedCards.length === 0) {
                reviewItems.innerHTML = '<p style="color: #4ade80;">No missed words! üéâ</p>';
            } else {
                reviewItems.innerHTML = missedCards.map(card => `
                    <div class="review-item">
                        <strong>üáµüáπ ${card.pt}</strong><br>
                        <span style="color: #aaa;">üá©üá™ ${card.de}</span><br>
                        <span style="color: #aaa;">üá¨üáß ${card.en || '-'}</span><br>
                        <small style="color: #666;">"${card.example}"</small>
                    </div>
                `).join('');
            }
            
            reviewList.classList.toggle('hidden');
        }
        
        function resetProgress() {
            if (confirm('Reset all progress? This cannot be undone!')) {
                localStorage.removeItem(STORAGE_KEY);
                localStorage.removeItem(STREAK_KEY);
                progress = {};
                updateGlobalStats();
                restartQuiz();
            }
        }
        
        function exportProgress() {
            const data = {
                progress: progress,
                streak: JSON.parse(localStorage.getItem(STREAK_KEY) || '{}'),
                exportedAt: new Date().toISOString(),
                totalWords: getAllCards().length
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `portuguese-flashcards-backup-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
        
        function importProgress(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (!data.progress) {
                        alert('Invalid backup file: no progress data found');
                        return;
                    }
                    
                    if (confirm(`Import backup from ${data.exportedAt || 'unknown date'}?\n\nThis will merge with your current progress (keeping the better score for each word).`)) {
                        // Merge progress (keep better scores)
                        for (const key in data.progress) {
                            if (!progress[key]) {
                                progress[key] = data.progress[key];
                            } else {
                                // Keep the better progress
                                progress[key].correct = Math.max(progress[key].correct || 0, data.progress[key].correct || 0);
                                progress[key].incorrect = Math.min(progress[key].incorrect || 0, data.progress[key].incorrect || 0);
                                progress[key].lastSeen = Math.max(progress[key].lastSeen || 0, data.progress[key].lastSeen || 0);
                            }
                        }
                        
                        // Merge streak (keep better)
                        if (data.streak && data.streak.days) {
                            const currentStreak = JSON.parse(localStorage.getItem(STREAK_KEY) || '{}');
                            if ((data.streak.days || 0) > (currentStreak.days || 0)) {
                                localStorage.setItem(STREAK_KEY, JSON.stringify(data.streak));
                            }
                        }
                        
                        saveProgress();
                        updateGlobalStats();
                        alert('Progress imported successfully! üéâ');
                    }
                } catch (err) {
                    alert('Error reading backup file: ' + err.message);
                }
            };
            reader.readAsText(file);
            event.target.value = ''; // Reset file input
        }
        
        function populateDateSelect() {
            const select = document.getElementById('dateSelect');
            const months = ['Janeiro', 'Fevereiro', 'Mar√ßo', 'Abril', 'Maio', 'Junho',
                           'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];
            
            // Check if today has new vocab
            const todayKey = new Date().toISOString().split('T')[0];
            const todaysVocab = vocabulary[todayKey] || [];
            
            // Update the Daily 20 label if today has vocab
            const dailyOption = select.querySelector('option[value="daily"]');
            if (todaysVocab.length > 0) {
                dailyOption.textContent = `üÜï Today's ${todaysVocab.length} + Review`;
            }
            
            // Get date keys from vocabulary (excluding 'manual')
            const dates = Object.keys(vocabulary)
                .filter(k => k !== 'manual' && /^\d{4}-\d{2}-\d{2}$/.test(k))
                .sort((a, b) => b.localeCompare(a)); // newest first
            
            // Add date options
            dates.forEach(dateKey => {
                const opt = document.createElement('option');
                opt.value = dateKey;
                const d = new Date(dateKey + 'T12:00:00'); // noon to avoid timezone issues
                const isToday = dateKey === todayKey;
                opt.textContent = isToday 
                    ? `üì∞ Hoje (${todaysVocab.length} palavras)` 
                    : `üì∞ ${d.getDate()} ${months[d.getMonth()]}`;
                select.appendChild(opt);
            });
        }
        
        // Initialize
        populateDateSelect();
        updateGlobalStats();
        initLangSelectors();
        loadDate();
        
        // Service Worker registration with auto-reload on update
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js')
                .then(reg => {
                    // Check for updates periodically
                    setInterval(() => reg.update(), 60000);
                    console.log('SW registered');
                })
                .catch(err => console.log('SW registration failed:', err));
            
            // Auto-reload when new SW takes control
            let refreshing = false;
            navigator.serviceWorker.addEventListener('controllerchange', () => {
                if (refreshing) return;
                refreshing = true;
                console.log('New version available, reloading...');
                window.location.reload();
            });
        }
    </script>
</body>
</html>
